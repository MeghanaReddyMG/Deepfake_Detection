{% extends "base.html" %}

{% block content %}
<div class="hero-section">
    <div class="hero-content">
        <h1>FalsifyX</h1>
        <p class="hero-subtitle">Advanced AI-powered forensic analysis for digital media authentication</p>
        <p class="welcome-message">Welcome back, <strong>{{ username }}</strong> | Security Clearance: Level 5</p>
    </div>
    <div class="particles">
        <div class="particle" style="left: 10%; animation-delay: 0s;"></div>
        <div class="particle" style="left: 20%; animation-delay: 2s;"></div>
        <div class="particle" style="left: 30%; animation-delay: 4s;"></div>
        <div class="particle" style="left: 40%; animation-delay: 1s;"></div>
        <div class="particle" style="left: 50%; animation-delay: 3s;"></div>
        <div class="particle" style="left: 60%; animation-delay: 5s;"></div>
        <div class="particle" style="left: 70%; animation-delay: 2.5s;"></div>
        <div class="particle" style="left: 80%; animation-delay: 4.5s;"></div>
        <div class="particle" style="left: 90%; animation-delay: 1.5s;"></div>
    </div>
</div>

<!-- Main Dashboard -->
<div class="dashboard-container">
    <!-- Sidebar Navigation -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h3>Analysis Modules</h3>
        </div>
        <nav class="sidebar-nav">
            <button class="nav-item active" data-section="image">
                <div class="nav-icon">IMG</div>
                <div class="nav-content">
                    <div class="nav-title">Image Forensics</div>
                    <div class="nav-desc">Face manipulation detection</div>
                </div>
                <div class="nav-badge" id="imageBadge">0</div>
            </button>
            <button class="nav-item" data-section="video">
                <div class="nav-icon">VID</div>
                <div class="nav-content">
                    <div class="nav-title">Video Analysis</div>
                    <div class="nav-desc">Temporal deepfake detection</div>
                </div>
                <div class="nav-badge" id="videoBadge">0</div>
            </button>
            <button class="nav-item" data-section="audio">
                <div class="nav-icon">AUD</div>
                <div class="nav-content">
                    <div class="nav-title">Audio Forensics</div>
                    <div class="nav-desc">Voice synthesis detection</div>
                </div>
                <div class="nav-badge" id="audioBadge">0</div>
            </button>
        </nav>

        <div class="sidebar-stats">
            <div class="stat-item">
                <div class="stat-value" id="totalAnalyses">0</div>
                <div class="stat-label">Total Analyses</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="fakeDetected">0</div>
                <div class="stat-label">Fakes Detected</div>
            </div>
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="main-content">
        <!-- Image Analysis Section -->
        <div id="imageSection" class="analysis-section active">
            <div class="section-header">
                <h2>Image Forensics Laboratory</h2>
                <div class="section-controls">
                    <button class="control-btn" id="clearImageHistory">Clear History</button>
                </div>
            </div>

            <!-- Analysis Description -->
            <div class="analysis-description">
                <h3>Image Deepfake Detection</h3>
                <p>Our advanced AI model analyzes images to detect face manipulation, AI-generated content, and synthetic media. Using computer vision and deep learning, we identify:</p>
                <ul class="feature-list">
                    <li>Face manipulation and deepfake detection</li>
                    <li>AI-generated images (GAN, Diffusion, StyleGAN, DALL-E, Midjourney)</li>
                    <li>Pixel-level artifact analysis</li>
                    <li>Frequency domain analysis for generation signatures</li>
                </ul>
                <div class="file-specs">
                    <div class="spec-item">
                        <strong>Supported Formats:</strong> JPG, JPEG, PNG, WebP
                    </div>
                    <div class="spec-item">
                        <strong>Maximum File Size:</strong> 100 MB
                    </div>
                    <div class="spec-item">
                        <strong>Processing Time:</strong> 3-5 seconds
                    </div>
                </div>
            </div>

            <div class="section-content">
                <!-- Detection Portal -->
                <div class="detection-portal">
                    <div class="portal-header">
                        <h3>Detection Portal</h3>
                        <div class="portal-status">
                            <span class="status-indicator active"></span>
                            <span>Neural Network: Online</span>
                        </div>
                    </div>

                    <div class="upload-area" id="imageUploadArea">
                        <div class="upload-zone" data-type="image">
                            <div class="upload-icon">IMG</div>
                            <h4>Drop Image Files Here</h4>
                            <p>Supports: JPG, PNG, JPEG, WebP (Max: 100 MB)</p>
                            <input type="file" id="imageInput" accept="image/*" multiple hidden>
                            <button class="upload-btn" onclick="document.getElementById('imageInput').click()">
                                Browse Images
                            </button>
                        </div>

                        <div id="imagePreviewArea" class="preview-area hidden">
                            <div class="preview-container">
                                <img id="imagePreview" alt="Image preview">
                                <div class="preview-overlay">
                                    <button class="action-btn analyze" id="analyzeImageBtn">Analyze</button>
                                    <button class="action-btn clear" id="clearImageBtn">Clear</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- History Panel -->
                <div class="history-panel">
                    <div class="history-header">
                        <h3>Analysis History</h3>
                        <div class="history-filter">
                            <select id="imageHistoryFilter">
                                <option value="all">All Results</option>
                                <option value="fake">Fake Only</option>
                                <option value="real">Authentic Only</option>
                            </select>
                        </div>
                    </div>
                    <div class="history-content" id="imageHistory">
                        <div class="empty-history">
                            <div class="empty-icon">HIST</div>
                            <p>No analysis history yet</p>
                            <small>Upload an image to start detecting deepfakes</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Video Analysis Section -->
        <div id="videoSection" class="analysis-section">
            <div class="section-header">
                <h2>Video Analysis Laboratory</h2>
                <div class="section-controls">
                    <button class="control-btn" id="clearVideoHistory">Clear History</button>
                </div>
            </div>

            <!-- Analysis Description -->
            <div class="analysis-description">
                <h3>Video Deepfake Detection</h3>
                <p>Advanced temporal analysis to detect AI-generated videos and face manipulation across video frames. Our system analyzes motion patterns, temporal consistency, and frame-by-frame authenticity:</p>
                <ul class="feature-list">
                    <li>Temporal deepfake detection across video frames</li>
                    <li>AI-generated video detection with comprehensive analysis</li>
                    <li>Blink pattern analysis for unnatural patterns</li>
                    <li>Motion consistency and frame interpolation detection</li>
                </ul>
                <div class="file-specs">
                    <div class="spec-item">
                        <strong>Supported Formats:</strong> MP4, AVI, MOV, WebM
                    </div>
                    <div class="spec-item">
                        <strong>Maximum File Size:</strong> 100 MB
                    </div>
                    <div class="spec-item">
                        <strong>Processing Time:</strong> 5-15 seconds (depends on length)
                    </div>
                </div>
            </div>

            <div class="section-content">
                <!-- Detection Portal -->
                <div class="detection-portal">
                    <div class="portal-header">
                        <h3>Detection Portal</h3>
                        <div class="portal-status">
                            <span class="status-indicator active"></span>
                            <span>Temporal Analysis: Online</span>
                        </div>
                    </div>

                    <div class="upload-area" id="videoUploadArea">
                        <div class="upload-zone" data-type="video">
                            <div class="upload-icon">VID</div>
                            <h4>Drop Video Files Here</h4>
                            <p>Supports: MP4, AVI, MOV, WebM (Max: 100 MB)</p>
                            <input type="file" id="videoInput" accept="video/*" multiple hidden>
                            <button class="upload-btn" onclick="document.getElementById('videoInput').click()">
                                Browse Videos
                            </button>
                        </div>

                        <div id="videoPreviewArea" class="preview-area hidden">
                            <div class="preview-container">
                                <video id="videoPreview" controls></video>
                                <div class="preview-overlay">
                                    <button class="action-btn analyze" id="analyzeVideoBtn">Analyze</button>
                                    <button class="action-btn clear" id="clearVideoBtn">Clear</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- History Panel -->
                <div class="history-panel">
                    <div class="history-header">
                        <h3>Analysis History</h3>
                        <div class="history-filter">
                            <select id="videoHistoryFilter">
                                <option value="all">All Results</option>
                                <option value="fake">Fake Only</option>
                                <option value="real">Authentic Only</option>
                            </select>
                        </div>
                    </div>
                    <div class="history-content" id="videoHistory">
                        <div class="empty-history">
                            <div class="empty-icon">HIST</div>
                            <p>No analysis history yet</p>
                            <small>Upload a video to start detecting deepfakes</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Audio Analysis Section -->
        <div id="audioSection" class="analysis-section">
            <div class="section-header">
                <h2>Audio Forensics Laboratory</h2>
                <div class="section-controls">
                    <button class="control-btn" id="clearAudioHistory">Clear History</button>
                </div>
            </div>

            <!-- Analysis Description -->
            <div class="analysis-description">
                <h3>Audio Deepfake Detection</h3>
                <p>Sophisticated spectral analysis to detect AI-generated speech, voice cloning, and synthetic audio. Our models analyze acoustic patterns, prosody, and neural vocoder traces:</p>
                <ul class="feature-list">
                    <li>Voice cloning detection through spectral analysis</li>
                    <li>AI-generated speech detection (TTS, Neural vocoders)</li>
                    <li>Prosody and rhythm analysis for synthetic patterns</li>
                    <li>Neural vocoder trace detection (WaveNet, Tacotron, VALL-E)</li>
                </ul>
                <div class="file-specs">
                    <div class="spec-item">
                        <strong>Supported Formats:</strong> MP3, WAV, OGG, M4A
                    </div>
                    <div class="spec-item">
                        <strong>Maximum File Size:</strong> 100 MB
                    </div>
                    <div class="spec-item">
                        <strong>Processing Time:</strong> 3-8 seconds (depends on length)
                    </div>
                </div>
            </div>

            <div class="section-content">
                <!-- Detection Portal -->
                <div class="detection-portal">
                    <div class="portal-header">
                        <h3>Detection Portal</h3>
                        <div class="portal-status">
                            <span class="status-indicator active"></span>
                            <span>Voice Analysis: Online</span>
                        </div>
                    </div>

                    <div class="upload-area" id="audioUploadArea">
                        <div class="upload-zone" data-type="audio">
                            <div class="upload-icon">AUD</div>
                            <h4>Drop Audio Files Here</h4>
                            <p>Supports: MP3, WAV, OGG, M4A (Max: 100 MB)</p>
                            <input type="file" id="audioInput" accept="audio/*" multiple hidden>
                            <button class="upload-btn" onclick="document.getElementById('audioInput').click()">
                                Browse Audio
                            </button>
                        </div>

                        <div id="audioPreviewArea" class="preview-area hidden">
                            <div class="preview-container">
                                <audio id="audioPreview" controls></audio>
                                <div class="preview-overlay">
                                    <button class="action-btn analyze" id="analyzeAudioBtn">Analyze</button>
                                    <button class="action-btn clear" id="clearAudioBtn">Clear</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- History Panel -->
                <div class="history-panel">
                    <div class="history-header">
                        <h3>Analysis History</h3>
                        <div class="history-filter">
                            <select id="audioHistoryFilter">
                                <option value="all">All Results</option>
                                <option value="fake">Fake Only</option>
                                <option value="real">Authentic Only</option>
                            </select>
                        </div>
                    </div>
                    <div class="history-content" id="audioHistory">
                        <div class="empty-history">
                            <div class="empty-icon">HIST</div>
                            <p>No analysis history yet</p>
                            <small>Upload audio to start detecting synthetic voices</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Analysis Modal -->
<div id="analysisModal" class="modal hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Neural Analysis in Progress</h3>
            <button class="modal-close" id="closeModal">×</button>
        </div>
        <div class="modal-body">
            <div class="analysis-animation">
                <div class="brain-scan"></div>
                <div class="neural-waves"></div>
            </div>
            <h4 id="analysisStatus">Initializing neural networks...</h4>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="progress-text" id="progressText">0%</span>
            </div>
            <p id="analysisStep">Preparing analysis pipeline...</p>
        </div>
    </div>
</div>

<!-- Results Modal -->
<div id="resultsModal" class="modal hidden">
    <div class="modal-content large">
        <div class="modal-header">
            <h3 id="resultsTitle">Analysis Results</h3>
            <button class="modal-close" id="closeResultsModal">×</button>
        </div>
        <div class="modal-body">
            <div id="resultsContent"></div>
            <div class="results-actions">
                <button class="action-btn" id="saveResults">Save Results</button>
                <button class="action-btn" id="newAnalysis">New Analysis</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}